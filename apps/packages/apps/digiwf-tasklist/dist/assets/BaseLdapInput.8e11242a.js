import{W as d,C as f,V as g,A as h,n as p,y as c,P as o,E as v,a as _,b as y,_ as b,c as x,d as A,e as m}from"./index.46e22db0.js";var L=Object.defineProperty,C=Object.getOwnPropertyDescriptor,i=(t,e,a,s)=>{for(var n=s>1?void 0:s?C(e,a):e,l=t.length-1,u;l>=0;l--)(u=t[l])&&(n=(s?u(e,a,n):u(n))||n);return s&&n&&L(e,a,n),n};let r=class extends g{constructor(){super(...arguments),this.search="",this.items=[],this.isLoading=!1,this.errorMessage="",this.model="",this.lastSearch="",this.noDataText="Tippen, um Suche zu starten"}get isReadonly(){return this.readonly||this.isLoading}get entries(){return this.items}input(t){return t}created(){this.value&&this.loadInitialValue(this.value)}async loadInitialValue(t){try{this.isLoading=!0;const e=h.getAxiosConfig(p.getGETConfig());let a;t.match(/^-?\d+$/)?a=await c(e).getUser(t):a=await c(e).getUserByUsername(t);const s=a.data;this.items.push(s),this.model=s.lhmObjectId,this.input(s.lhmObjectId),this.errorMessage=""}catch{this.errorMessage="Der Benutzer konnte nicht geladen werden.",this.model="",this.input("")}this.isLoading=!1}getFullName(t){return t.forename+" "+t.surname}filterUsers(t,e){return this.getFullName(t).toLowerCase().includes(e.toLowerCase())}getNamePrefix(t){return t.forename.slice(0,1)+t.surname.slice(0,1)}castNoAttrAvailable(t){return t==="No_Attribute_Available"?"-":t}async queryResults(){if(!(!this.search||this.search.length<3)&&this.lastSearch!==this.search.slice(0,3)){this.lastSearch=this.search.slice(0,3);try{this.noDataText="Benutzer werden gesucht...",this.isLoading=!0;const t={searchString:this.lastSearch,ous:this.ldapOus?this.ldapOus:void 0},e=h.getAxiosConfig(p.getGETConfig()),a=await c(e).getUsers(t);this.lastSearch===this.search.slice(0,3)&&(this.items=a.data),this.errorMessage=""}catch{this.errorMessage="Der Benutzer konnte nicht geladen werden."}this.isLoading=!1,this.noDataText="Tippen, um Suche zu starten"}}};i([o()],r.prototype,"value",2);i([o()],r.prototype,"col",2);i([o()],r.prototype,"label",2);i([o()],r.prototype,"ldapOus",2);i([o()],r.prototype,"readonly",2);i([o()],r.prototype,"rules",2);i([v()],r.prototype,"input",1);i([d("search")],r.prototype,"queryResults",1);r=i([f({components:{VAutocomplete:_}})],r);var I=function(){var e=this,a=e._self._c;return e._self._setupProxy,a(_,{attrs:{col:e.col,filter:e.filterUsers,items:e.entries,label:e.label,loading:e.isLoading,"no-data-text":e.noDataText,readonly:e.isReadonly,rules:e.rules?e.rules:!0,"search-input":e.search,value:e.model,"auto-select-first":"","item-text":"lhmObjectId","item-value":"lhmObjectId",outlined:"",placeholder:"Benutzer suchen..."},on:{"update:searchInput":function(s){e.search=s},"update:search-input":function(s){e.search=s},input:e.input},scopedSlots:e._u([{key:"selection",fn:function(s){return[e._v(" "+e._s(e.getFullName(s.item))+" ")]}},{key:"item",fn:function(s){return[[a(b,{staticClass:"avatar"},[e._v(" "+e._s(e.getNamePrefix(s.item))+" ")]),a(x,[a(A,[e._v(e._s(e.getFullName(s.item)))]),a(m,[e._v(e._s(e.castNoAttrAvailable(s.item.email)))]),a(m,[e._v(" "+e._s(e.castNoAttrAvailable(s.item.department))+" "),a("span",{staticClass:"dot"},[e._v("\u2022")]),e._v(" "+e._s(e.castNoAttrAvailable(s.item.ou))+" ")])],1)]]}}])})},N=[],O=y(r,I,N,!1,null,"8ab1af93",null,null);const S=O.exports;export{S as default};
