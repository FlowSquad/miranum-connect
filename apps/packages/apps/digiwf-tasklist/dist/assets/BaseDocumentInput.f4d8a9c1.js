import{V as i,h as r,A as u,n as l,J as c,b as d,f as m,i as _,j as p,k as o,l as a,o as h,p as g,q as f}from"./index.46e22db0.js";const v=i.extend({name:"BaseDocumentInput",mixins:[r],props:{value:Array,col:Number,dms:String,label:String,readonly:Boolean},data(){return{documents:[],locked:!1,requesting:!1,errorMessage:"",documentInput:""}},computed:{isReadonly(){return this.readonly||this.locked}},created(){this.value&&(this.documents=this.value)},methods:{input(){this.$emit("input",this.documents)},async addDocument(){if(!this.documentInput)return;const s=new Date().getTime();this.requesting=!0;try{this.locked=!0;const e={url:this.documentInput},t=u.getAxiosConfig(l.getGETConfig()),n=await c(t).getMetaData(e);this.errorMessage="",setTimeout(()=>{this.documentInput="",this.documents.push(n.data),this.requesting=!1,this.input()},Math.max(0,1e3-(new Date().getTime()-s)))}catch{setTimeout(()=>{this.errorMessage="Das Dokument konnte nicht geladen werden.",this.requesting=!1},Math.max(0,1e3-(new Date().getTime()-s)))}},removeDocument(s){for(let e=0;e<this.documents.length;e++)if(this.documents[e].url==s){this.documents.splice(e,1);break}this.input()},calculateIcon(s){return s==="PDF-Dokument"?"mdi-file-pdf":"mdi-file"}}});var y=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"mb-7"},[t(m,{staticClass:"documentInput",attrs:{disabled:e.requesting,error:!e.valid&&e.hasFocused,label:e.label,readonly:e.readonly,"hide-details":"",outlined:"",type:"text"},scopedSlots:e._u([{key:"append",fn:function(){return[e.readonly?e._e():t("div",{staticClass:"appendWrapper"},[t(_,{attrs:{"leave-absolute":""}},[e.requesting?t(p,{attrs:{color:"white",indeterminate:"",size:"24"}}):t(o,{staticClass:"addButtonDocInput",attrs:{color:"white",height:"56",text:""},on:{click:e.addDocument}},[t(a,[e._v(" mdi-file-plus-outline ")])],1)],1)],1)]},proxy:!0}]),model:{value:e.documentInput,callback:function(n){e.documentInput=typeof n=="string"?n.trim():n},expression:"documentInput"}}),e.errorMessage?t("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e(),e.documents&&e.documents.length>0?t("div",{staticClass:"listWrapper"},e._l(e.documents,function(n){return t("div",{key:n.url},[t(h,{staticClass:"d-flex ma-2 ml-3 align-center"},[t(a,{staticClass:"mr-2"},[e._v(" "+e._s(e.calculateIcon(n.type))+" ")]),t("a",{staticClass:"documentLink",attrs:{href:n.url,target:"_blank"}},[e._v(e._s(n.name))]),t(g),e.readonly?e._e():t(o,{staticClass:"removeButton",attrs:{icon:""},on:{click:function(I){return e.removeDocument(n.url)}}},[t(a,[e._v(" mdi-delete ")])],1)],1)],1)}),0):e._e(),!e.valid&&e.hasFocused?t(f,{staticClass:"mt-1",attrs:{value:e.errorBucket,color:"error"}}):e._e()],1)},k=[],D=d(v,y,k,!1,null,"f296701a",null,null);const C=D.exports;export{C as default};
